!function(){"use strict";angular.module("view.file",["view.file.tpls","cb.x2js","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","hljs","ngJsonExplorer","ngSanitize","RecursionHelper"])}(),function(){"use strict";function n(n,e,l,i){var t=this;t.trustUri=function(n){e.trustAsResourceUrl(n)},t.load=function(e){var t=l.get(e);t?angular.isArray(t)?(n.loading=!1,n.json=JSON.parse(t[1])):t.then(function(e){n.json=JSON.parse(e.data)}):i.get(e,{cache:l,transformResponse:function(n,e){return n}}).then(function(e){n.loading=!1,n.json=JSON.parse(e.data)})}}angular.module("view.file").controller("FriendlyJsonCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http"]}(),function(){"use strict";function n(n){return{restrict:"E",controller:"FriendlyJsonCtrl",controllerAs:"ctrl",scope:{uri:"=?",json:"=?"},templateUrl:"/view-file-ng/friendly-json.html",compile:function(e){return n.compile(e,function(n,e,l,i){n.loading=!0,n.$watch("uri",function(n){n&&i.load(n)})})}}}angular.module("view.file").directive("friendlyJson",n).filter("isObject",function(){return function(n){return angular.isObject(n)}}).filter("isArray",function(){return function(n){return angular.isArray(n)}}).filter("isFunction",function(){return function(n){return angular.isFunction(n)}}),n.$inject=["RecursionHelper"]}(),function(){"use strict";function n(n,e,l,i,t){var o=this;o.trustUri=function(n){e.trustAsResourceUrl(n)},o.load=function(e){var t=l.get(e);t?angular.isArray(t)?(n.loading=!1,o.parse(t[1])):t.then(function(e){n.loading=!1,o.parse(e.data)}):i.get(e,{cache:l,transformResponse:function(n,e){return n}}).then(function(e){n.loading=!1,o.parse(e.data)})},o.parse=function(e){n.json=t.xml_str2json(e)}}angular.module("view.file").controller("FriendlyXmlCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http","x2js"]}(),function(){"use strict";function n(n){return{restrict:"E",controller:"FriendlyXmlCtrl",controllerAs:"ctrl",scope:{uri:"=?",xml:"=?"},templateUrl:"/view-file-ng/friendly-json.html",compile:function(e){return n.compile(e,function(n,e,l,i){n.loading=!0,n.$watch("uri",function(n){n&&i.load(n)}),n.$watch("xml",function(n){n&&i.parse(n)})})}}}angular.module("view.file").directive("friendlyXml",n),n.$inject=["RecursionHelper"]}(),function(){"use strict";function n(n,e){return function(l,i,t){l.$watch(function(n){return n.$eval(t.includeSafe)},function(l){n.get(l).then(function(n){var l=n.data;i.html(e(l))})})}}angular.module("view.file").directive("includeSafe",n),n.$inject=["$http","$sanitize"]}(),function(){"use strict";function n(n){function e(e,l,i,t,o){return n.open(angular.extend({templateUrl:e+"",controller:["$scope","$uibModalInstance","title","ctrl","validate",function(n,e,l,i,t){n.title=l,n.ctrl=i,n.alerts=[],n.ok=function(){t&&(n.alerts=t(n)),0===n.alerts.length&&e.close(n.ctrl)},n.cancel=function(){e.dismiss("cancel")}}],size:"lg",resolve:{title:function(){return l},ctrl:function(){return i},validate:function(){return t||function(n){var e=[];return n.form&&angular.forEach(n.form.$error,function(n,l){angular.forEach(n,function(n,i){e.push(l+": "+(n.$name||i))})}),e}}}},o)).result}var l={show:e};return l}angular.module("view.file").service("ModalService",["$uibModal",n])}(),function(){"use strict";function n(n,e,l,i,t){var o=this;o.trustUri=function(n){e.trustAsResourceUrl(n)},o.loadHljs=function(e){n.loading=!l.get(e),n.loading?i.get(e,{cache:l,transformResponse:function(n,e){return n}}).then(function(l){n.loading=!1,n.hljsUri=e}):n.hljsUri=e},o.showModal=function(){n.allowModal&&t.show("/view-file-ng/show-file.modal.html",null,n)},o.toggleCode=function(){n.showCode=!n.showCode}}angular.module("view.file").controller("ViewFileCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http","ModalService"]}(),function(){"use strict";function n(){function n(n,e){return void 0!==n?n===!0||"true"===n:e}function e(n){var e="other";return/\/[x]?html/.test(n)?e="html":/[\+\/]json$/.test(n)?e="json":/[\+\/]xml$/.test(n)?e="xml":/^(audio|image|text|video|xml)\//.test(n)?e=n.split("/")[0]:/^application\//.test(n),e}return{restrict:"E",controller:"ViewFileCtrl",controllerAs:"ctrl",scope:{uri:"=",downloadUri:"=?",contentType:"=",fileName:"=?",_allowModal:"@allowModal",_controls:"@controls",_showCode:"@showCode",_trustUri:"@trustUri"},templateUrl:"/view-file-ng/view-file.html",link:function(l,i,t,o){l.allowModal=n(l._allowModal,!0),l.controls=n(l._controls,l.allowModal||!!l.downloadUri),l.showCode=n(l._showCode,!1),l.trustUri=n(l._trustUri,!1),l.loading=!0,l.$watch("uri",function(n){n&&(l.fileName=l.fileName||n.split("/").pop(),l.fileType=e(l.contentType),l.trustUri&&o.trustUri(n),"xml"===l.fileType?o.loadHljs(n):l.loading=!1)})}}}angular.module("view.file").directive("viewFile",n)}(),function(){"use strict";angular.module("view.file").directive("viewObject",function(){return{restrict:"E",transclude:!0,link:function(n,e,l){var i=' data="'+n.$eval(l.data)+'"',t=l.type?' type="'+n.$eval(l.type)+'"':"",o=l.height?' height="'+n.$eval(l.height)+'"':"",r=l.width?' width="'+n.$eval(l.width)+'"':"";e.append('<object " '+o+r+t+i+" ng-transclude></object>")}}})}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/friendly-json.html",'<dl class="dl-horizontal">\n  <span ng-repeat="(key,val) in json track by $index" ng-hide="(val | isFunction) || (key.startsWith(\'_\') && key !== \'__text\')">\n    <dt>{{ key.startsWith(\'__\') ? key.replace(\'__\', \'\') : key }}</dt>\n    <!-- simple value -->\n    <dd ng-if="!(val | isObject)">{{ val !== \'\' ? val : \'&#160;\' }}</dd>\n    <!-- array or object -->\n    <span ng-if="(val | isObject)">\n      <!-- array with simple values -->\n      <dd ng-if="(val | isArray) && !(val[0] | isObject)">{{ val.join(\', \') }}</dd>\n      <!-- add nbsp for better alignment of values -->\n      <dd ng-if="!(val | isArray) || (val[0] | isObject)">&#160;</dd>\n      <!-- object, recurse -->\n      <dd ng-if="!(val | isArray)">\n        <!--span ng-init="json = val" ng-include="\'/view-file-ng/friendly-json.html\'"></span-->\n        <friendly-json json="val"></friendly-json>\n      </dd>\n      <!-- array of object, repeat recurse -->\n      <dd ng-if="(val | isArray) && (val[0] | isObject)" ng-repeat="v in val track by $index">\n        <!--span ng-repeat="json in val track by $index" ng-include="\'/view-file-ng/friendly-json.html\'"></span-->\n        <friendly-json json="v"></friendly-json>\n      </dd>\n    </span>\n  </span>\n</dl>\n')}])}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/show-file.modal.html",'<form class="form" role="form">\n  <div class="modal-header">\n    <h3 class="modal-title">{{ ctrl.fileName }}</h3>\n  </div>\n  <div ng-cloak class="modal-body clearfix">\n    <view-file uri="ctrl.uri" content-type="ctrl.contentType" controls="false" show-code="{{ctrl.showCode}}"></view-file>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary pull-right" ng-click="cancel()">Close</button>\n  </div>\n</form>')}])}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/view-file.html","<div class=\"view-file row\">\n\n  <div class=\"controls col-sm-1 text-right\" ng-if=\"controls && (((fileType === 'xml') || (fileType === 'json') || (fileType === 'html') || (fileType === 'text')) || allowModal || downloadUri)\">\n    <div class=\"code-control\">\n      <a ng-if=\"(fileType === 'xml') || (fileType === 'json') || (fileType === 'html') || (fileType === 'text')\" class=\"btn btn-default\" ng-click=\"ctrl.toggleCode()\">\n        <span ng-show=\"!showCode && ((fileType === 'json') || (fileType === 'text'))\">{ }</span>\n        <i ng-show=\"!showCode && ((fileType === 'html') || (fileType === 'xml'))\" class=\"fa fa-code\"></i>\n"+'        <i ng-show="showCode" class="fa fa-align-left"></i>\n      </a>\n    </div>\n\n    <div class="modal-control">\n      <a ng-if="allowModal && fileType !== \'audio\'" class="btn btn-default" ng-click="ctrl.showModal()"><i class="glyphicon glyphicon-resize-full"></i></a>\n    </div>\n\n    <div class="download-control">\n      <a ng-if="downloadUri" class="btn btn-default" ng-href="{{downloadUri}}" download><i class="glyphicon glyphicon-download-alt"></i></a>\n    </div>\n  </div>\n\n  <div class="viewer-wrapper" ng-class="{\'col-sm-11\': controls, \'col-sm-12\': !controls}">\n    <div class="loading">\n      Loading... <i class="fa fa-spinner fa-spin"></i>\n    </div>\n\n    <div class="viewer" ng-if="!loading">\n      <!-- audio / video -->\n      <div class="source" ng-if="fileType === \'audio\' || fileType === \'video\'">\n        <videogular ng-class="fileType">\n          <vg-media vg-src="uri"></vg-media>\n          <vg-controls>\n            <vg-play-pause-button></vg-play-pause-button>\n            <vg-time-display>{{ currentTime | date:\'mm:ss\' }}</vg-time-display>\n            <vg-scrub-bar>\n              <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n            </vg-scrub-bar>\n            <vg-time-display>{{ timeLeft | date:\'mm:ss\' }}</vg-time-display>\n            <vg-volume>\n              <vg-mute-button></vg-mute-button>\n              <vg-volume-bar></vg-volume-bar>\n            </vg-volume>\n            <vg-fullscreen-button ng-show="fileType === \'video\'"></vg-fullscreen-button>\n          </vg-controls>\n        </videogular>\n      </div>\n\n      <!-- html / text -->\n      <div ng-if="(fileType === \'html\') || (fileType === \'text\')">\n        <div class="source" ng-show="!showCode"><div include-safe="uri"></div></div>\n        <hljs ng-show="showCode" hljs-include="uri"></hljs>\n      </div>\n\n      <!-- image -->\n      <div class="source text-center" ng-if="fileType === \'image\'"><img ng-src="{{uri}}"></div>\n\n      <!-- json -->\n      <div ng-if="fileType === \'json\'">\n        <friendly-json class="source" ng-show="!showCode" uri="uri"></friendly-json>\n        <json-explorer class="source" ng-show="showCode" url="uri"></json-explorer>\n      </div>\n\n      <!-- xml -->\n      <div ng-if="fileType === \'xml\'">\n        <friendly-xml ng-show="!showCode" class="source" uri="uri"></friendly-xml>\n        <hljs ng-show="showCode" hljs-include="hljsUri"></hljs>\n      </div>\n\n      <!-- other -->\n      <view-object class="source" ng-if="fileType === \'other\'" data="uri" type="contentType">\n        <a ng-show="downloadUri" class="btn btn-default" ng-href="{{downloadUri}}">Download</a>\n        <div class="alert alert-danger" ng-show="!downloadUri">Alert: Cannot display this file!</div>\n      </view-object>\n    </div>\n  </div>\n\n</div>')}])}();